{% extends 'base.html' %}
{% load static %}
{% load lang_tags %}

{% block content %}
<div class="container my-4">

    <div class="text-center mb-3">
        <div class="row mt-2">
            <div class="col">
                <hr>
                <h5>–ù–∞–π—Ç–∏ —Å–Ω–∏–ø–ø–µ—Ç –ø–æ –Ω–æ–º–µ—Ä—É</h5>
                <form action='' id="view_snippet_form">
                    <div class="form-row row g-2 align-items-center">
                        <div class="col-sm-2">
                            <label for="snippet_id" class="col-form-label">–ù–æ–º–µ—Ä:</label>
                        </div>
                        <div class="col-sm-6">
                            <input type="number" class="form-control" id="snippet_id" placeholder="–≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ">
                        </div>
                        <div class="col-sm-2">
                            <input type="submit" class="btn btn-sm btn-info w-100" value="–ù–∞–π—Ç–∏">
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <h5 class="fw-bold mt-4">{{ pagename }}</h5>
    </div>

    <div class="table-responsive">
        <table class="table table-hover table-sm align-middle">
            <thead class="table-light small">
                <tr>
                    <th>ID</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–Ø–∑—ã–∫</th>
                    <th>–°–æ–∑–¥–∞–Ω</th>
                    <th>–û–±–Ω–æ–≤–ª—ë–Ω</th>
                    <th>üëÅ –ü—Ä–æ—Å–º–æ—Ç—Ä—ã</th>
                    <th class="text-center">‚úèÔ∏è</th>
                    <th class="text-center">üóëÔ∏è</th>
                </tr>
            </thead>
            <tbody class="small">
                {% for snippet in snippets %}
                <tr>
                    <td>{{ snippet.id }}</td>
                    <td>
                        <a href="{% url 'mainapp:snippet-detail' snippet.id %}" class="text-decoration-none">
                            {{ snippet.name }}
                        </a>
                    </td>
                    <td>
                    <i class="{% lang_icon_class snippet.lang %}"></i>
                    <span>{{ snippet.lang }}</span>
                    </td>

                    <td>{{ snippet.creation_date|date:"d.m.Y H:i" }}</td>
                    <td>{{ snippet.updated_date|date:"d.m.Y H:i" }}</td>
                    <td>{{ snippet.views_count }}</td>
                    <td class="text-center">
                        <a href="{% url 'mainapp:snippet-edit' snippet.pk %}" class="btn btn-sm btn-outline-secondary">‚úé</a>
                    </td>
                    <td class="text-center">
                        <form action="{% url 'mainapp:snippet-delete' snippet.pk %}" method="post" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å?');">‚úò</button>
                        </form>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-center text-muted">–°–Ω–∏–ø–ø–µ—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="text-end mt-2 small">
        <span class="text-muted">–í—Å–µ–≥–æ —Å–Ω–∏–ø–ø–µ—Ç–æ–≤: {{ count_snippets }}</span>
    </div>

    <div class="row mt-3">
        <div class="col-6 offset-3">
            <a href="{% url 'mainapp:snippet-add' %}" class="btn btn-info w-100 btn-sm">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–Ω–∏–ø–ø–µ—Ç</a>
        </div>
    </div>

</div>
{% endblock %}
